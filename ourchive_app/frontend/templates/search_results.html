{% extends 'index.html' %}
{% block title %}Search Results{% endblock %}
{% block content %}	
<script>
	function getFormVals(event) {
		event.preventDefault();
		link = event.target.href;
		var vals_form = document.forms["searchResultsForm_work"];
		vals_form.action = link;
		document.forms["searchResultsForm_work"].submit();
	}
</script>
<div uk-grid id="search-results-grid">
	<div class="uk-width-1-4" id="search-results-work-facet-child"> 
    	<div class="uk-card uk-card-default uk-card-body" id="search-results-work-facet-card">
    		<form class="uk-form-horizontal"  method="post" name="searchResultsForm_work" action="/search/filter" id="search-results-work-facet-form">	
    			{% csrf_token %}
	        	<dl class="uk-description-list uk-description-list-divider" id="search-results-work-facet-dl">	
			        {% for facet in facets %} 
						{% include "facet_tile.html" %}     
				    {% endfor %}		        
				</dl>
				<input type="hidden" id="term" name="term" value="{{ term }}">
				<input id="search-results-work-facet-form-submit" class="uk-button uk-button-default" type="submit" value="Submit"/>
			</form>
		</div>
	</div>
	<div class="uk-width-3-4 uk-margin-remove" id="search-results-tab-parent">
		<ul class="uk-subnav uk-subnav-pill uk-subnav-divider uk-flex uk-flex-right" uk-switcher="animation: uk-animation-fade;connect: .search-switcher;active: {{default_tab}}" id="search-results-switcher-controls">
            <li id="results-switcher-li-works"><a href="#" id="works_tab">Works ({{ works.page.count }})</a></li>
            <li id="results-switcher-li-bookmarks"><a href="#" id="bookmarks_tab">Bookmarks ({{ bookmarks.page.count }})</a></li>
            <li id="results-switcher-li-users"><a href="#" id="users_tab">Collections ({{ collections.page.count }})</a></li>
            <li id="results-switcher-li-tags"><a href="#" id="tags_tab">Tags ({{ tags.page.count }})</a></li>
            <li id="results-switcher-li-users"><a href="#" id="users_tab">Users ({{ users.data|length }})</a></li>
    	</ul>
	
		<ul class="uk-switcher uk-margin-remove search-switcher" id="search-results-work-facet-switcher">
			<li id="search-results-work-facet-switcher-li" class="uk-width-expand"> 
				<div class="uk-width-expand" id="search-results-works-parent">
			    	<div class="uk-margin" id="search-results-works-sort-child">
				        <div uk-form-custom="target: > * > span:last-child" id="search-results-works-sort-ukform">
				            <select id="search-results-works-sort-select">
				                <option id="search-results-works-sort-placeholder" value="">Sort by...</option>
				                <option id="search-results-works-sort-fingerguns" value="2">Fingerguns</option>
				                <option id="search-results-works-sort-newest" value="3">Newest</option>
				                <option id="search-results-works-sort-oldest" value="4">Oldest</option>
				            </select>
				            <span class="uk-link" id="search-results-works-sort-link">
				                <span uk-icon="icon: plus"></span>
				                <span></span>
				            </span>
				        </div>
				    </div>			

					{% for work in works.data %} 
						{% include "work_tile.html" %}     
				    {% endfor %}
				    {% include 'pagination.html' with previous=works.page.prev_params next=works.page.next_params object_name='work_search' %}
				</div>
			</li>
			<li id="search-results-bookmarks-li" class="uk-width-expand"> 
				<div class="uk-width-expand" id="search-results-bookmarks-content">
					<div uk-form-custom="target: > * > span:last-child" id="search-results-bookmarks-sort-parent">
			            <select id="search-results-bookmarks-sort-select">
			                <option id="search-results-bookmarks-sort-placeholder" value="">Sort by...</option>
			                <option id="search-results-bookmarks-sort-fingerguns" value="2">Fingerguns</option>
			                <option id="search-results-bookmarks-sort-newest" value="3">Newest</option>
			                <option id="search-results-bookmarks-sort-oldest" value="4">Oldest</option>
			            </select>
			            <span class="uk-link" id="search-results-bookmarks-sort-link">
			                <span uk-icon="icon: plus"></span>
			                <span></span>
			            </span>
			        </div>
			        {% for bookmark in bookmarks.data %} 
						{% include "bookmark_tile.html" %}     
				    {% endfor %}
				    {% include 'pagination.html' with previous=bookmarks.page.prev_params next=bookmarks.page.next_params object_name='bookmark_search' %}
				</div>     
			</li>
			<li id="search-results-collections-li" class="uk-width-expand"> 
				<div class="uk-width-expand" id="search-results-collections-content">
					<div uk-form-custom="target: > * > span:last-child" id="search-results-collections-sort-parent">
			            <select id="search-results-collections-sort-select">
			                <option id="search-results-collections-sort-placeholder" value="">Sort by...</option>
			                <option id="search-results-collections-sort-fingerguns" value="2">Fingerguns</option>
			                <option id="search-results-collections-sort-newest" value="3">Newest</option>
			                <option id="search-results-collections-sort-oldest" value="4">Oldest</option>
			            </select>
			            <span class="uk-link" id="search-results-collections-sort-link">
			                <span uk-icon="icon: plus"></span>
			                <span></span>
			            </span>
			        </div>
			        {% for bookmark_collection in collections.data %} 
						{% include "bookmark_collection_tile.html" %}     
				    {% endfor %}
				    {% include 'pagination.html' with previous=collections.page.prev_params next=collections.page.next_params object_name='collection_search' %}
				</div>     
			</li>
			<li id="search-results-tags-li" class="uk-width-expand"> 
				<div class="uk-width-expand" id="search-results-tags-content">
					<div uk-form-custom="target: > * > span:last-child" id="search-results-tags-sort-parent">
			            <select id="search-results-tags-sort-select">
			                <option id="search-results-tags-sort-placeholder" value="">Sort by...</option>
			                <option id="search-results-tags-sort-works" value="2">Work count</option>
			                <option id="search-results-tags-sort-bookmarks" value="3">Bookmark count</option>
			                <option id="search-results-tags-sort-newest" value="4">Newest</option>
			                <option id="search-results-tags-sort-oldest" value="5">Oldest</option>
			            </select>
			            <span class="uk-link" id="search-results-tags-sort-link">
			                <span uk-icon="icon: plus"></span>
			                <span></span>
			            </span>
			        </div>
			        <dl class="uk-description-list uk-description-list-divider" id="search-results-tags-content-dl">
			        {% for type, tag in tags.data.items %} 
				        <dt id="search-results-tags-{{type}}-dt">{{ type }}</dt>
				        <dd id="search-results-tags-{{type}}-dd">
				        <span uk-icon="icon: tag"></span> {% for single_tag in tag %}<a id="search-results-tags-{{single_tag.id}}-link" href="/tags/{{single_tag.id}}" style="padding-left:5px;">{{ single_tag.text }}</a> {% endfor %}
				        </dd>
				    {% endfor %}
				    {% include 'pagination.html' with previous=tags.page.prev_params next=tags.page.next_params object_name='tag_search' %}
					</dl>
				</div>     
			</li>
			<li id="search-results-users-parent" class="uk-width-expand"> 
				<div uk-grid id="search-results-users-grid">
				<div class="uk-width-expand" id="search-results-users-content-parent">
					<div uk-form-custom="target: > * > span:last-child" id="search-results-users-sort-parent">
			            <select id="search-results-users-sort-select">
			                <option id="search-results-users-sort-placeholder" value="">Sort by...</option>
			                <option id="search-results-users-sort-alpha" value="2">Alphabetical</option>
			                <option id="search-results-users-sort-newest" value="3">Newest</option>
			                <option id="search-results-users-sort-oldest" value="4">Oldest</option>
			            </select>
			            <span class="uk-link" id="search-results-users-sort-link">
			                <span uk-icon="icon: plus"></span>
			                <span></span>
			            </span>
			        </div>
			        {% for user in users.data %} 
						<p id="search-results-user-{{user.id}}"> <a id="search-results-user-{{user.id}}-link" href="/username/{{ user.username }}">{{ user.username }}</a> </p>
				    {% endfor %}
				</div>     
			</li>
		</ul>
	</div>
</div>
{% endblock %}