{% load i18n %}
<div class="ourchive-work-card uk-box-shadow-small uk-height-large uk-width-1-1" id="work-{{work.id}}-tile-container">
    <div class="uk-grid uk-grid-small uk-height-1-1" uk-grid>
        <div class="uk-width-1-3@m uk-width-1-1@s card-info" id="work-{{work.id}}-tile-card">
            <!-- title, author, work type, 1 tag/attribute type, cover -->
            <p class="uk-margin-small-bottom"><span id="work-{{work.id}}-tile-title" class="uk-margin-remove-bottom ourchive-tile-title">
                <a id="work-{{work.id}}-tile-title-link" href="/works/{{work.id}}" data-testid="work-tile-title">{{work.title}}</a>
            </span> </p>
            <p class="uk-margin-remove-bottom uk-margin-small-top"><span id="work-{{ work.id }}-creators>">By
                    {% for user in work.users %}<a id="work-{{work.id}}-user-link" data-testid="work-user-link" href="{% url 'user-profile-parent' user.id %}">{{ user.username }}</a>
                        {% if not forloop.last %}, {% endif %}{% empty %}
                        <a id="work-{{work.id}}-user-link" data-testid="work-user-link" href="{% url 'user-profile-parent' work.user_id %}">{{ work.user }}</a>
                    {% endfor %}
            </span></p>
            <p class="uk-margin-remove-bottom uk-margin-small-top"><span id="work-{{ work.id }}-type" class="ourchive-muted">{{ work.work_type_name }}</span></p>
            <p class="uk-margin-remove-bottom uk-margin-small-top"><span class="uk-inline ourchive-muted uk-text-italic" id="work-metadata-language">{% for language in work.languages_readonly %}{{ language.display_name }}{% if not forloop.last %},{% endif %}
        {% endfor %}</span></p>
            <!-- TODO: ADD CLICK TO EXPAND -->
            {% if work.cover_url != "None" and work.cover_url is not None and work.cover_url != "" %}
            <div class="uk-width-auto uk-margin-small-top" id="work-{{work.id}}-tile-img-parent">
                <img class="work-tile-cover" alt="{{work.cover_alt_text}}" src="{{work.cover_url}}" id="work-{{work.id}}-tile-image">
            </div>
            {% endif %}
        </div>
        <div class="uk-width-2-3@m uk-width-1-1@s card-info" id="work-{{work.id}}-info-card">
            <div class="uk-grid uk-grid-small uk-child-width-1-1">
                <!-- series/anthology, summary, tag/attribute group 1, 2, and 3 -->
                {% if work.summary %}
                    <div class="uk-height-max-small works-summary-container summary-container" id="show-summary-{{ work.id }}">
                        <p id="work-{{work.id}}-tile-summary-p" class="uk-margin-remove-vertical">{% autoescape off %}{{ work.summary }}{% endautoescape %}</p>
                    </div>
                    <a class="show-more-btn uk-text-bold uk-margin-small-top" onclick="toggleChiveData('{{ work.id }}', 'summary', 'work', '{% translate 'Show More...' %}', '{% translate 'Hide' %}')" id="more-btn-summary-{{ work.id }}">{% translate 'Show more...' %}</a>
                {% endif %}
                {% if work.series %}
                    <div class="uk-align-left uk-max-height-small uk-margin-small-top uk-margin-small-bottom">
                        <hr class="ourchive-hr"/>
                        <span id="work-metadata-series">{% blocktranslate with series_num=work.series_num %}Part {{ series_num }} of {% endblocktranslate %}<a href="{% url 'fe-series' work.series.id%}">{{work.series.title}}</a></span>
                        <hr class="ourchive-hr"/>
                    </div>
                {% endif %}
                {% if work.anthologies %}
                    <div class="uk-align-left uk-max-height-small uk-margin-small-top uk-margin-small-bottom">
                        {% if not work.series %}
                            <hr class="ourchive-hr"/>
                        {% endif %}
                        <span id="work-metadata-series">{% translate 'Anthologies' %}: {% for anthology in work.anthologies %}<a href="{% url 'fe-anthology' anthology.id%}">{{anthology.anthology}}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</span>
                        <hr class="ourchive-hr"/>
                    </div>
                {% endif %}
                <div class="uk-height-max-small works-tag-container tag-container {% if not work.anthologies and not work.series %}uk-margin-small-top{% endif %}" id="show-tags-{{ work.id }}">
                    {% if not work.anthologies and not work.series %}
                        <hr class="ourchive-hr"/>
                    {% endif %}
                    {% if work.attributes %}{% include "object_attributes.html" with object='work' object_id=work.id attributes=work.attributes %}{% endif %}
                    {% if work.tags %}{% include "tag_partial.html" with obj_name='work' tags=work.tags %}{% endif %}
                </div>
                <a class="show-more-btn uk-text-bold uk-margin-small-top" onclick="toggleChiveData('{{ work.id }}', 'tags', 'work', '{% translate 'Show More...' %}', '{% translate 'Hide' %}')" id="more-btn-tags-{{ work.id }}">{% translate 'Show more...' %}</a>
            </div>
        </div>
        <div class="uk-width-1-1 card-metadata" id="work-{{ work.id }}-list-meta">
            <!-- language, complete status, updated, chapters, word count, comments, fingerguns -->
            {% include 'work_metadata.html' %}
        </div>
    </div>
</div>
