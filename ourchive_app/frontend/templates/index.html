<!DOCTYPE html>
<html lang="en">
<head>
	{% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'frontend/css/' %}ourchive-{{css_mode}}.css" />
    <link rel="stylesheet" href="{% static 'frontend/css/scroll-to-top.css' %}" />
    <link rel="stylesheet" href="{% static 'frontend/css/editor.css' %}" />
    <link rel="shortcut icon" href="{% static 'favicon/favicon.ico' %}"/>
    <script src="{% static 'frontend/js/uikit.min.js' %}"></script>
    <script src="{% static 'frontend/js/uikit-icons.min.js' %}"></script>
    <script src="{% static 'frontend/js/ourchive-tags.js' %}"></script>
    <title>{% block title %}Ourchive{% endblock %}</title>
</head>
<body>
	{% if messages %}
		{% for message in messages %}
			<script>
				var status = '{{message.tags}}' === 'success' ? 'primary' : 'danger';
				UIkit.notification({
				    message: '<strong>{{ message }}</strong>',
				    status: status,
				    pos: 'top-center',
				    timeout: 2500
				});
			</script>
		{% endfor %}
	
	{% endif %}
	<div class="ourchive-navbar" id="ourchive-navbar-parent">
		<nav class="uk-navbar-container uk-navbar-transparent uk-padding-small uk-padding-remove-vertical" uk-navbar id="uk-nav-parent">
		    <div class="uk-navbar-left" id="uk-nav-left">
		    	<a class="uk-navbar-toggle uk-hidden@s" uk-toggle="target: #sidenav"  uk-navbar-toggle-icon id="uk-nav-hamburger"></a>
		        <ul class="uk-navbar-nav uk-visible@s">
		            <li class="uk-active" id="nav-home"><a href="/">Home</a></li>
		            <li><a href="/works" id="nav-works">Works</a></li>
		            <li><a href="/bookmarks" id="nav-bookmarks">Bookmarks</a></li>
		            <li><a href="/bookmark-collections" id="nav-bookmark-collections">Bookmark Collections</a></li>
		        </ul>
		    </div>	    
		    <div class="uk-navbar-right uk-margin-right" id="uk-nav-right">
		    	 <ul class="uk-navbar-nav" id="uk-nav-right-ul">
		    	 	<li id="nav-search-li">
			            <a class="uk-navbar-toggle" uk-search-icon href="#" id="nav-search-toggle"></a>
			            <div id="nav-search-div" class="uk-drop" uk-drop="mode: click; pos: left-center; offset: 0">
			                <form class="uk-search uk-search-navbar uk-width-1-1" action="/search/" method="post" id="nav-search-form">
			                	{% csrf_token %}
			                    <input class="uk-search-input" type="search" placeholder="Search..." autofocus name="term" value="{{ term }}" id="nav-search-input">
			                </form>
			            </div>
		        	</li>
		    	 	<li id="theme-switcher-li">
		    	 		<a href="/switch-css-mode" id="theme-switcher-link">
		    	 			{% if request.session.css_mode == "dark" %}
		    	 			<span class="custom-icon" uk-icon="icon: sun-regular; ratio:1" title="Light Mode" id="theme-switcher-light">
		    	 			{% else %}
		    	 			<span class="custom-icon" uk-icon="icon: moon-regular; ratio:1" title="Dark Mode" id="theme-switcher-dark">
		    	 			{% endif %}
		    	 		</a></span>
		    	 	</li>
		        	<li id="nav-right-main">		        
			            {% if not request.user.is_authenticated %}
			            	<li class="uk-active" id="nav-login-li">
			            		<a href="/login" id="nav-login-link">
			            			<span uk-icon="icon: sign-in; ratio:1.25" title="Sign In" id="nav-login-icon"></span>
			            		</a>
			            	</li>
			            	<li class="uk-active" id="nav-register-li">
			            		<a href="/register" id="nav-register-link">
			            			<span uk-icon="icon: user; ratio:1.25" title="Register" id="nav-register-icon"></span>
			            		</a>
			            	</li>
			            {% endif %}
			            {% if request.user.is_authenticated %}
			            	<a href="/username/{{request.user}}" id="nav-username">{{ request.user }}</a>
			            	<div class="uk-navbar-dropdown" id="nav-user-dropdown-div">
	                    		<ul class="uk-nav uk-navbar-dropdown-nav" id="nav-user-dropdown-ul">
	                    			<li id="nav-new-work-li"><a href="/works/new/" id="nav-new-work-link">New Work</a></li>
	                    			<li id="nav-bookmarks-li"><a href="/username/{{request.user}}/bookmarks" id="nav-bookmarks-link">Bookmarks</a></li>
	                    			<li id="nav-bookmarks-li"><a href="/username/{{request.user}}/bookmark-collections" id="nav-bookmark-collecitons-link">Bookmark Collections</a></li>
	                    			<li id="nav-works-li"><a href="/username/{{request.user}}/works" id="nav-works-link">Works</a></li>
	                    			<li id="nav-edit-profile-li"><a href="/username/{{request.user}}/edit" id="nav-edit-profile-link">Edit Profile</a></li>
	                    			<li id="nav-edit-account-li"><a href="/username/{{request.user}}/account/edit" id="nav-edit-account-link">Edit Account</a></li>
	                    			<li id="nav-blocklist-li"><a href="/users/{{request.user}}/blocklist" id="nav-blocklist-link">Blocklist</a></li>
	                    			{% if request.session.has_notifications %}
	                    			<li id="nav-notifications-unread-li"><a class="uk-text-emphasis uk-text-secondary" href="/username/{{request.user}}/notifications" id="nav-notifications-unread-link">Notifications (Unread)</a></li>
	                    			{% else %}
	                    			<li id="nav-notifications-li"><a href="/username/{{request.user}}/notifications" id="nav-notifications-link">Notifications</a></li>
	                    			{% endif %}
					            	<li id="nav-signout-li"><a href="/logout" id="nav-signout-link">Log Out</a></li>
			        			</ul>
			        	</div>
			        	{% endif %}
			        </li>
		    </ul>
	    </div>

		</nav>
	</div>
	<div id="sidenav" uk-offcanvas="flip: true" class="uk-offcanvas">
		<div class="uk-offcanvas-bar" id="sidenav-parent-div">
			<ul class="uk-nav" id="sidenav-ul">
				<li id="sidenav-home-li" class="uk-active"><a id="sidenav-home-link" href="/">Home</a></li>
	            <li id="sidenav-works-li"><a id="sidenav-works-link" href="/works">Works</a></li>
	            <li id="sidenav-bookmarks-li"><a id="sidenav-bookmarks-link" href="/bookmarks">Bookmarks</a></li>
	            <li id="sidenav-bookmark-collections-li"><a id="sidenav-bookmark-collections-link" href="/bookmark-collections">Bookmark Collections</a></li>
	            <li id="sidenav-search-li"><a id="sidenav-search-link" href="/search">Search Results</a></li>
	            {% if not request.user.is_authenticated %}
	            	<li id="sidenav-sign-in-li" class="uk-active">
	            		<a id="sidenav-sign-in-link" href="/login"><span uk-icon="icon: sign-in; ratio:1.25" title="Sign in"/></a></li>
	            	<li id="sidenav-register-li" class="uk-active">
	            		<a id="sidenav-register-link" href="/register"><span uk-icon="icon: user; ratio:1.25" title="Register"/></a></a></li>
	            {% endif %}
	            {% if request.user.is_authenticated %}
	            	<li id="sidenav-signout-li" class="uk-active">
	            		<a id="sidenav-signout-link" href="/logout"><span uk-icon="icon: sign-out; ratio:1.25" title="Sign out"></span></a></li>
	            {% endif %}
			</ul>
		</div>
	</div>
	<button id="scroll-to-top-button" class="uk-button uk-button-primary scroll-to-top" style="display: none;" onclick="topFunction()" uk-scroll><span uk-icon="arrow-up"></span></button>
	<div class="uk-container uk-margin" id="content-block-parent">	
		<div uk-grid id="parent-grid" id="content-block-parent-grid" uk-height-viewport="expand: true">
			{% block content %}
				<div class="uk-child-width-1-1" id="index-content-div">
				        <h1 id="index-content-heading" class="uk-heading-medium">{{ heading_message }}</h1>
				  		<span id="index-content-message">{{ long_message }}</span>
						<form id="index-content-search-form" class="uk-search uk-search-large" method="post" action="search/">
							{% csrf_token %}
							<a id="index-content-search-link" href="#" uk-search-icon></a>
							<input autocomplete="off" id="index-content-search-input" class="uk-search-input" type="search" name="term" placeholder="Search..." value="{{ term }}" oninput="doAutocomplete(this.value, 'search', 'main')">
							<div id="tag-autocomplete-dropdown-main" uk-drop></div>
						</form>
						
				</div>		  
			{% endblock %}	
	    </div>
	</div>
	<script src="{% static 'frontend/js/scroll-to-top.js' %}"></script>
</body>
<footer id="ourchive-footer uk-container">
	<hr id="footer-hr">
	<div id="footer-parent-grid" class="uk-text-center uk-grid uk-padding-small" uk-grid>
	    <div id="footer-child-grid" class="uk-width-1-2@m uk-width-1-1@s">
	        <span id="footer-created-by" class="uk-text-meta uk-padding">Ourchive is created & maintained by <a href="https://github.com/klreeher">@klreeher</a> and <a href="https://github.com/c-e-p">@c-e-p</a>. Issues with the site? Report <a class="uk-text-uppercase uk-text-meta" target="_blank" href="https://github.com/c-e-p/ourchive/issues/new">here</a>.</span>
	    </div>
	    <div id="footer-child-grid" class="uk-width-1-2@m uk-width-1-1@s">
	        {% for page in content_pages %}
	        <a href="/content-pages/{{page.id}}" class="uk-link uk-padding-small">{{page.name}}</a>
	        {% endfor %}
	    </div>
	</div>
</footer>
</html>